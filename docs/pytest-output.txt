============================= test session starts =============================
platform win32 -- Python 3.13.9, pytest-8.4.2, pluggy-1.6.0 -- C:\Users\Sofia\Documents\anime-track\venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\Sofia\Documents\anime-track
plugins: cov-7.0.0
collecting ... collected 86 items

tests/test_api.py::test_api_create_and_list_animes PASSED                [  1%]
tests/test_api.py::test_api_delete_requires_force_when_watched PASSED    [  2%]
tests/test_api.py::test_api_export_json_and_status_code PASSED           [  3%]
tests/test_coverage_extra.py::test_repo_list_animes_tag_join_and_filters PASSED [  4%]
tests/test_coverage_extra.py::test_repo_list_watches_ordering_and_min_score PASSED [  5%]
tests/test_coverage_extra.py::test_service_update_delete_and_notfound_behaviour PASSED [  6%]
tests/test_coverage_extra.py::test_service_import_errors_and_partial_success PASSED [  8%]
tests/test_coverage_extra.py::test_service_update_watch_score_bounds_and_errors PASSED [  9%]
tests/test_coverage_extra.py::test_web_index_and_users_pages PASSED      [ 10%]
tests/test_coverage_extra.py::test_web_user_creation_validation_and_edit PASSED [ 11%]
tests/test_coverage_extra.py::test_web_studio_tag_routes_notfound_and_create PASSED [ 12%]
tests/test_coverage_extra.py::test_web_anime_create_invalid_and_edit_notfound PASSED [ 13%]
tests/test_coverage_extra.py::test_web_watch_import_export_and_bad_parse PASSED [ 15%]
tests/test_coverage_extra.py::test_web_watch_routes_and_errors PASSED    [ 16%]
tests/test_exception.py::test_add_watch_entry_raises_for_invalid_user PASSED [ 17%]
tests/test_exception.py::test_add_watch_entry_raises_for_invalid_anime PASSED [ 18%]
tests/test_exception.py::test_add_watch_entry_negative_episodes PASSED   [ 19%]
tests/test_exception.py::test_add_watch_entry_score_not_completed PASSED [ 20%]
tests/test_exception.py::test_delete_anime_blocked_by_watch_entry PASSED [ 22%]
tests/test_exception.py::test_update_watch_score_requires_completed PASSED [ 23%]
tests/test_functional.py::test_create_user_and_list PASSED               [ 24%]
tests/test_functional.py::test_create_studio_and_anime_and_search PASSED [ 25%]
tests/test_functional.py::test_add_watch_and_prevent_duplicate PASSED    [ 26%]
tests/test_functional.py::test_export_csv_and_json_endpoints PASSED      [ 27%]
tests/test_functional.py::test_import_csv_via_upload PASSED              [ 29%]
tests/test_functional.py::test_delete_anime_blocked_and_force_delete PASSED [ 30%]
tests/test_functional.py::test_update_score_only_when_completed_via_ui PASSED [ 31%]
tests/test_functional.py::test_search_and_filter_ui_combination PASSED   [ 32%]
tests/test_integration.py::test_create_user_anime_and_watch_persist PASSED [ 33%]
tests/test_integration.py::test_persistence_across_service_instances PASSED [ 34%]
tests/test_integration.py::test_import_export_workflow PASSED            [ 36%]
tests/test_integration.py::test_delete_anime_block_and_force PASSED      [ 37%]
tests/test_integration.py::test_tag_and_studio_crud PASSED               [ 38%]
tests/test_integration.py::test_watch_updates_and_score_rules PASSED     [ 39%]
tests/test_integration.py::test_filters_and_orders_in_db PASSED          [ 40%]
tests/test_integration.py::test_import_rows_with_title_resolution PASSED [ 41%]
tests/test_integration.py::test_error_cases_on_integration PASSED        [ 43%]
tests/test_integration.py::test_full_end_to_end_workflow PASSED          [ 44%]
tests/test_structural.py::test_index_and_layout_links PASSED             [ 45%]
tests/test_structural.py::test_user_crud_flow PASSED                     [ 46%]
tests/test_structural.py::test_studio_and_tag_crud_routes PASSED         [ 47%]
tests/test_structural.py::test_anime_crud_and_force_delete_branch PASSED [ 48%]
tests/test_structural.py::test_watchlist_export_import_and_error_branches PASSED [ 50%]
tests/test_structural.py::test_watch_new_and_edit_delete_routes PASSED   [ 51%]
tests/test_structural.py::test_error_handlers_rendered_for_notfound_and_validation PASSED [ 52%]
tests/test_structural.py::test_anime_list_filters_and_order_ui PASSED    [ 53%]
tests/test_unit.py::test_create_user_success PASSED                      [ 54%]
tests/test_unit.py::test_create_user_invalid_name[] PASSED               [ 55%]
tests/test_unit.py::test_create_user_invalid_name[   ] PASSED            [ 56%]
tests/test_unit.py::test_update_user_success PASSED                      [ 58%]
tests/test_unit.py::test_update_user_invalid PASSED                      [ 59%]
tests/test_unit.py::test_delete_user PASSED                              [ 60%]
tests/test_unit.py::test_create_studio_and_list PASSED                   [ 61%]
tests/test_unit.py::test_update_and_delete_studio PASSED                 [ 62%]
tests/test_unit.py::test_create_studio_invalid PASSED                    [ 63%]
tests/test_unit.py::test_create_tag_and_list PASSED                      [ 65%]
tests/test_unit.py::test_update_delete_tag PASSED                        [ 66%]
tests/test_unit.py::test_create_tag_invalid PASSED                       [ 67%]
tests/test_unit.py::test_create_anime_success PASSED                     [ 68%]
tests/test_unit.py::test_create_anime_various_titles[A] PASSED           [ 69%]
tests/test_unit.py::test_create_anime_various_titles[Some Title] PASSED  [ 70%]
tests/test_unit.py::test_create_anime_invalid_title PASSED               [ 72%]
tests/test_unit.py::test_create_anime_invalid_episodes PASSED            [ 73%]
tests/test_unit.py::test_get_nonexistent_anime_raises PASSED             [ 74%]
tests/test_unit.py::test_add_watch_entry_basic PASSED                    [ 75%]
tests/test_unit.py::test_add_watch_auto_complete PASSED                  [ 76%]
tests/test_unit.py::test_add_watch_score_only_if_completed PASSED        [ 77%]
tests/test_unit.py::test_add_duplicate_watch_is_blocked PASSED           [ 79%]
tests/test_unit.py::test_add_watch_episodes_exceed PASSED                [ 80%]
tests/test_unit.py::test_update_watch_episodes_and_status PASSED         [ 81%]
tests/test_unit.py::test_update_watch_score_allowed PASSED               [ 82%]
tests/test_unit.py::test_update_watch_score_disallowed PASSED            [ 83%]
tests/test_unit.py::test_update_nonexistent_watch_raises PASSED          [ 84%]
tests/test_unit.py::test_list_animes_search_filter_order PASSED          [ 86%]
tests/test_unit.py::test_list_animes_order_by_episodes PASSED            [ 87%]
tests/test_unit.py::test_list_watches_filters_and_order PASSED           [ 88%]
tests/test_unit.py::test_list_watches_filters_and_order_continued PASSED [ 89%]
tests/test_unit.py::test_export_watchlist PASSED                         [ 90%]
tests/test_unit.py::test_import_watchlist_rows_success_and_errors PASSED [ 91%]
tests/test_unit.py::test_delete_anime_blocked_if_watches_exist PASSED    [ 93%]
tests/test_unit.py::test_delete_anime_no_watches PASSED                  [ 94%]
tests/test_unit.py::test_inmemory_repo_set_get_tag_and_anime_tags PASSED [ 95%]
tests/test_unit.py::test_episodes_edge_cases[0-0-True] PASSED            [ 96%]
tests/test_unit.py::test_episodes_edge_cases[0-None-True] PASSED         [ 97%]
tests/test_unit.py::test_episodes_edge_cases[5-5-True] PASSED            [ 98%]
tests/test_unit.py::test_episodes_edge_cases[6-5-False] PASSED           [100%]

======================== 86 passed in 66.07s (0:01:06) ========================
